import{f,b as m}from"../chunks/DLAMQWiX.js";import{ap as Se,ar as S,D as Ce,au as Pe,aq as Ie,f as Ae,$ as He,k as n,z as e,i,as as oe,l as t,t as T,j as Oe,F as o,aC as $e,n as Te}from"../chunks/CA-YEXjj.js";import{d as Ee,s as l}from"../chunks/CcFbpJ_b.js";import{i as le}from"../chunks/Cjh8sQO3.js";import{e as B,i as z}from"../chunks/DlD--9Nh.js";import{h as De}from"../chunks/B8NQnvAs.js";import{s as pe}from"../chunks/COGkoBFf.js";import{D as Me}from"../chunks/CGbQeNq2.js";import{M as Ve,A as Fe}from"../chunks/DvmCYIuW.js";import{P as Le}from"../chunks/Y6OHFTre.js";import{A as Re}from"../chunks/BEydp0xW.js";const C=[{agent_id:"parent_rep",display_name:"Maria",role:"voter",avatar:'<i class="fa-solid fa-people-group" aria-hidden="true"></i>',color:"#e74c3c",constitution:{id:"family-advocate",version:"1.0",persona:"godparent",adherence:4}},{agent_id:"elder_rep",display_name:"Harold",role:"voter",avatar:'<i class="fa-solid fa-person-cane" aria-hidden="true"></i>',color:"#3498db",constitution:{id:"accessibility-first",version:"1.0",persona:"sentinel",adherence:4}},{agent_id:"youth_rep",display_name:"Jordan",role:"voter",avatar:'<i class="fa-solid fa-person-running" aria-hidden="true"></i>',color:"#2ecc71",constitution:{id:"active-lifestyle",version:"1.0",persona:"muse",adherence:3}},{agent_id:"nature_rep",display_name:"Sage",role:"voter",avatar:'<i class="fa-solid fa-tree" aria-hidden="true"></i>',color:"#27ae60",constitution:{id:"environmental-steward",version:"1.0",persona:"sentinel",adherence:5}},{agent_id:"moderator",display_name:"Council Chair",role:"mediator",avatar:'<i class="fa-solid fa-scale-balanced" aria-hidden="true"></i>',color:"#9b59b6",constitution:{id:"fair-process",version:"1.0",persona:"ambassador",adherence:5}}],ce=[{id:"option_playground",name:"Playground Expansion",description:"Expand the children's playground with new equipment and safety surfacing.",proposer:"parent_rep",pros:["Safe play space for children","Encourages family visits","Modern equipment"],cons:["Limited appeal to other age groups","Higher maintenance costs"],vcp_aligned_with:["family_safety","community_gathering","child_development"]},{id:"option_fitness",name:"Fitness Trail",description:"Install an outdoor fitness trail with exercise stations around the park perimeter.",proposer:"youth_rep",pros:["Free exercise option","Appeals to all ages","Low maintenance"],cons:["Reduces green space","May attract crowds"],vcp_aligned_with:["health_wellness","accessibility","community_fitness"]},{id:"option_garden",name:"Community Garden",description:"Convert a section to community garden plots with a small greenhouse.",proposer:"nature_rep",pros:["Environmental education","Fresh produce","Community bonding"],cons:["Ongoing management needed","Limited participants"],vcp_aligned_with:["environmental_stewardship","food_security","education"]},{id:"option_accessible",name:"Accessibility Upgrade",description:"Add paved paths, benches, shade structures, and accessible facilities throughout.",proposer:"elder_rep",pros:["Inclusive for all abilities","Improves existing amenities","Benefits everyone"],cons:['Less "new" appeal',"May seem incremental"],vcp_aligned_with:["accessibility","dignity","universal_design"]}],u=[{round:1,actor:"moderator",action:"speak",content:"Welcome to the park renovation deliberation. We have $150,000 budget and four proposals. Let's hear from each advocate.",sentiment:"neutral",vcpContextShared:["budget","process_rules"],vcpContextHidden:[],explanation:"Moderator sets context. Budget and rules are shared with all."},{round:2,actor:"parent_rep",action:"speak",content:"The playground is the heart of our family community. Safe, engaging play equipment brings families together daily.",sentiment:"support",referencesOption:"option_playground",vcpContextShared:["priority: family_safety","goal: community_gathering"],vcpContextHidden:["personal_family_situation","specific_safety_concerns"],explanation:"Maria advocates for playground. Her family focus is visible; personal family details are private."},{round:3,actor:"elder_rep",action:"speak",content:"Before we add new features, we should ensure everyone can access what we have. Many neighbors can't navigate the current paths.",sentiment:"support",referencesOption:"option_accessible",vcpContextShared:["priority: accessibility","value: inclusion"],vcpContextHidden:["personal_mobility_challenges","health_conditions"],explanation:"Harold speaks for accessibility. His advocacy is public; any personal mobility issues remain private."},{round:4,actor:"youth_rep",action:"speak",content:"A fitness trail gives everyone a free gym. It's not just for young people—I see folks of all ages who would use it.",sentiment:"support",referencesOption:"option_fitness",vcpContextShared:["priority: health_wellness","goal: active_community"],vcpContextHidden:["personal_fitness_routine","gym_membership_status"],explanation:"Jordan promotes fitness. Their health values are shared; personal workout habits are not."},{round:5,actor:"nature_rep",action:"speak",content:"A community garden teaches sustainability, provides fresh food, and creates green jobs for local youth.",sentiment:"support",referencesOption:"option_garden",vcpContextShared:["priority: environmental_education","value: sustainability"],vcpContextHidden:["personal_gardening_experience","dietary_preferences"],explanation:"Sage advocates for garden. Environmental values are visible; personal practices are private."},{round:6,actor:"elder_rep",action:"speak",content:"I want to support the playground, but only if it includes accessible paths and seating for grandparents.",sentiment:"question",referencesOption:"option_playground",vcpContextShared:["condition: accessibility_integration"],vcpContextHidden:["personal_grandparent_role"],explanation:"Harold offers conditional support. His requirement is public; personal family role is private."},{round:7,actor:"parent_rep",action:"amend",content:"I propose we combine: Playground with accessible paths and seating areas. Grandparents should enjoy watching their grandchildren safely.",referencesOption:"option_playground",vcpContextShared:["compromise: integrated_design"],vcpContextHidden:["personal_parent_experiences"],explanation:"Maria proposes integration. The compromise is public; personal parenting experiences are private."},{round:8,actor:"youth_rep",action:"speak",content:"Could the fitness trail connect to the playground? Parents could exercise while kids play.",sentiment:"support",vcpContextShared:["suggestion: multi_use_design"],vcpContextHidden:["personal_childcare_constraints"],explanation:"Jordan suggests synergy. The design idea is shared; any personal constraints are not."},{round:9,actor:"nature_rep",action:"speak",content:"What if the garden plots were along the fitness trail? Exercise stations with educational signage about plants.",sentiment:"neutral",vcpContextShared:["integration: education_wellness"],vcpContextHidden:["personal_teaching_background"],explanation:"Sage proposes integration. The concept is public; personal expertise is private."},{round:10,actor:"moderator",action:"speak",content:"We're seeing convergence toward an integrated design. Let me propose a combined option: Accessible paths connecting playground, fitness stations, and small garden area.",sentiment:"neutral",vcpContextShared:["synthesis: combined_proposal"],vcpContextHidden:[],explanation:"Moderator synthesizes. The combined proposal emerges from shared preferences."},{round:11,actor:"moderator",action:"call_vote",content:"All in favor of the integrated park design with accessible playground, fitness trail, and community garden section?",vcpContextShared:["process: final_vote"],vcpContextHidden:[],explanation:"Vote called on synthesized option that addresses multiple stakeholder values."}],qe=[{voter:"parent_rep",option_id:"integrated",timestamp:new Date().toISOString(),public_rationale:"This gives our families a safe, accessible play area with room to grow.",private_rationale:"My daughter with mobility challenges can finally play with her friends"},{voter:"elder_rep",option_id:"integrated",timestamp:new Date().toISOString(),public_rationale:"The accessibility focus is maintained while adding new amenities.",private_rationale:"I can finally take my walker to watch the grandkids"},{voter:"youth_rep",option_id:"integrated",timestamp:new Date().toISOString(),public_rationale:"Free fitness for everyone, plus connected community spaces.",private_rationale:"Saves me $50/month gym membership"},{voter:"nature_rep",option_id:"integrated",timestamp:new Date().toISOString(),public_rationale:"The garden section provides environmental education within an active park.",private_rationale:"Smaller than I hoped, but better than nothing"}],We=["Each stakeholder shared their VALUES and PRIORITIES publicly (family safety, accessibility, health, environment)","PERSONAL REASONS for those priorities remained private (health conditions, family situations, financial constraints)","The moderator could synthesize a compromise because they understood what each party valued","Private rationales (elderly rep's mobility issues, parent's daughter's disability) never entered the public record","VCP enabled preference aggregation while protecting the dignity of each participant's personal circumstances"];var je=f('<meta name="description" content="See how VCP enables preference aggregation while protecting private rationales."/>'),Be=f('<button class="control-btn"><span class="control-icon"> </span> <span> </span></button> <button class="control-btn"><span class="control-icon">⏭</span> <span>Step</span></button>',1),ze=f('<span class="value-chip svelte-kkelhp"> </span>'),Je=f('<div class="option-card svelte-kkelhp"><h4 class="svelte-kkelhp"> </h4> <p class="option-desc svelte-kkelhp"> </p> <div class="option-proposer svelte-kkelhp"> </div> <div class="option-values svelte-kkelhp"></div></div>'),Ne=f('<div class="vote-card svelte-kkelhp"><div class="vote-header svelte-kkelhp"><span class="vote-avatar svelte-kkelhp"> </span> <span class="vote-name svelte-kkelhp"> </span> <span class="vote-icon svelte-kkelhp"><i class="fa-solid fa-check" aria-hidden="true"></i></span></div> <div class="vote-public svelte-kkelhp"><span class="vote-label svelte-kkelhp">Public Rationale</span> <p class="svelte-kkelhp"> </p></div> <div class="vote-private svelte-kkelhp"><span class="vote-label svelte-kkelhp"><i class="fa-solid fa-lock" aria-hidden="true"></i> Private (never shared)</span> <p class="svelte-kkelhp"> </p></div></div>'),Ue=f('<div class="votes-section svelte-kkelhp"><h3 class="svelte-kkelhp"><i class="fa-solid fa-box-ballot" aria-hidden="true"></i> Final Vote: Integrated Park Design</h3> <p class="vote-subtitle svelte-kkelhp">Unanimous approval achieved through deliberation</p> <div class="votes-grid svelte-kkelhp"></div></div>'),Ge=f('<li class="svelte-kkelhp"> </li>'),Qe=f('<div class="learning-section svelte-kkelhp"><h3 class="svelte-kkelhp"><i class="fa-solid fa-graduation-cap" aria-hidden="true"></i> What VCP Protected</h3> <ul class="learning-points svelte-kkelhp"></ul></div>'),Ke=f('<div class="policy-layout svelte-kkelhp"><div class="controls-row svelte-kkelhp"><!> <!></div> <div class="options-grid svelte-kkelhp"></div> <div class="arena-section svelte-kkelhp"><!></div> <div class="chat-section svelte-kkelhp"><!></div> <!> <div class="progress-section svelte-kkelhp"><div class="progress-bar svelte-kkelhp"><div class="progress-fill svelte-kkelhp"></div></div> <span class="progress-text svelte-kkelhp"> </span></div> <!></div>');function lt(de,ve){Se(ve,!0);let s=S(0),_=S(!1),P=S(Ce([])),E=S(null),D=S(!1),I=null;function ue(a){return C.find(A=>A.agent_id===a)||C[0]}function K(){if(e(s)<u.length){const a=u[e(s)];o(E,a.actor,!0),o(P,[...e(P),{id:`msg_${e(s)}`,sender:ue(a.actor),content:a.content,timestamp:new Date().toISOString(),vcpContextShared:a.vcpContextShared,vcpContextHidden:a.vcpContextHidden,action:a.action}],!0),$e(s),e(s)>=u.length&&setTimeout(()=>{o(D,!0)},1e3),setTimeout(()=>{o(E,null)},1500)}else M()}function M(){o(_,!1),I&&(clearInterval(I),I=null)}function X(){M(),o(s,0),o(P,[],!0),o(E,null),o(D,!1)}Pe(()=>()=>{I&&clearInterval(I)});let Y=S(void 0),Z=S(3e3);const he=[{id:"careful",name:"Careful",description:"Thoughtful deliberation pace",icon:"fa-scale-balanced",data:{speed:4500},tags:["educational"]},{id:"normal",name:"Normal",description:"Standard deliberation pace",icon:"fa-play",data:{speed:3e3},tags:["balanced"]},{id:"fast",name:"Fast",description:"Quick policy overview",icon:"fa-forward",data:{speed:1500},tags:["quick"]}];function ge(a){o(Z,a.data.speed,!0),o(Y,a.id,!0),e(_)&&(M(),ee())}function ee(){e(s)>=u.length&&X(),o(_,!0),I=setInterval(()=>{K(),e(s)>=u.length&&M()},e(Z))}const me=oe(()=>{const a=[],A=C.reduce((H,h)=>(H[h.agent_id]=e(P).filter(p=>p.sender.agent_id===h.agent_id).length,H),{});return a.push({field:"Policy Options",category:"shared",value:`${ce.length} proposals`,reason:"All options publicly presented"}),a.push({field:"Stakeholder Input",category:"shared",value:`${e(P).length} statements`,reason:"Public positions and arguments"}),a.push({field:"Value Alignments",category:"shared",reason:"Which values each proposal serves"}),a.push({field:"Deliberation Phase",category:"influenced",value:`Step ${e(s)}/${u.length}`,reason:"Progress affects consensus building"}),a.push({field:"Participation Balance",category:"influenced",value:Object.values(A).join("/")+" msgs",reason:"Equal voice opportunity monitored"}),a.push({field:"Consensus Status",category:"influenced",value:e(D)?"Achieved":"Building",reason:"Positions converging through dialogue"}),a.push({field:"Personal Circumstances",category:"withheld",reason:"Individual life situations protected"}),a.push({field:"Private Rationales",category:"withheld",reason:"Personal reasons for votes never disclosed"}),a.push({field:"Political Considerations",category:"withheld",reason:"Career/reputation concerns hidden"}),a.push({field:"Emotional Stakes",category:"withheld",reason:"Personal investment in outcomes protected"}),a});De("kkelhp",a=>{var A=je();Ae(()=>{He.title="Policy Design Demo - VCP Multi-Agent"}),m(a,A)}),Me(de,{title:"Community Park Renovation",description:"Four stakeholders deliberate on how to spend $150k. VCP shares values while protecting personal circumstances.",onReset:X,controls:H=>{var h=Be(),p=Oe(h);p.__click=()=>e(_)?M():ee();var O=n(p),J=n(O,!0);t(O);var $=i(O,2),V=n($,!0);t($),t(p);var R=i(p,2);R.__click=K,T(()=>{p.disabled=e(s)>=u.length&&!e(_),l(J,e(_)?"⏸":"▶"),l(V,e(_)?"Pause":"Play"),R.disabled=e(_)||e(s)>=u.length}),m(H,h)},children:H=>{var h=Ke(),p=n(h),O=n(p);Le(O,{get presets(){return he},get selected(){return e(Y)},onselect:c=>ge(c),title:"Deliberation Pace"});var J=i(O,2);Re(J,{get entries(){return e(me)},title:"VCP Context Audit",compact:!0}),t(p);var $=i(p,2);B($,21,()=>ce,z,(c,r)=>{var g=Je(),y=n(g),k=n(y,!0);t(y);var d=i(y,2),b=n(d,!0);t(d);var x=i(d,2),F=n(x);t(x);var q=i(x,2);B(q,21,()=>e(r).vcp_aligned_with,z,(v,L)=>{var w=ze(),W=n(w,!0);t(w),T(Q=>l(W,Q),[()=>e(L).replace(/_/g," ")]),m(v,w)}),t(q),t(g),T(v=>{l(k,e(r).name),l(b,e(r).description),l(F,`Proposed by ${v??""}`)},[()=>{var v;return(v=C.find(L=>L.agent_id===e(r).proposer))==null?void 0:v.display_name}]),m(c,g)}),t($);var V=i($,2),R=n(V);Ve(R,{get agents(){return C},get currentSpeaker(){return e(E)},layout:"row",showSharedFields:!1}),t(V);var N=i(V,2),fe=n(N);Fe(fe,{get messages(){return e(P)},get agents(){return C},get currentSpeaker(){return e(E)},showContextIndicators:!0}),t(N);var te=i(N,2);{var _e=c=>{var r=Ue(),g=i(n(r),4);B(g,21,()=>qe,z,(y,k)=>{const d=oe(()=>C.find(j=>j.agent_id===e(k).voter));var b=Ne(),x=n(b),F=n(x),q=n(F,!0);t(F);var v=i(F,2),L=n(v,!0);t(v),Te(2),t(x);var w=i(x,2),W=i(n(w),2),Q=n(W,!0);t(W),t(w);var ne=i(w,2),ie=i(n(ne),2),we=n(ie,!0);t(ie),t(ne),t(b),T(()=>{var j,se,re;l(q,(j=e(d))==null?void 0:j.avatar),pe(v,`color: ${((se=e(d))==null?void 0:se.color)??""}`),l(L,(re=e(d))==null?void 0:re.display_name),l(Q,e(k).public_rationale),l(we,e(k).private_rationale)}),m(y,b)}),t(g),t(r),m(c,r)};le(te,c=>{e(D)&&c(_e)})}var U=i(te,2),G=n(U),ye=n(G);t(G);var ae=i(G,2),ke=n(ae);t(ae),t(U);var be=i(U,2);{var xe=c=>{var r=Qe(),g=i(n(r),2);B(g,21,()=>We,z,(y,k)=>{var d=Ge(),b=n(d,!0);t(d),T(()=>l(b,e(k))),m(y,d)}),t(g),t(r),m(c,r)};le(be,c=>{e(D)&&c(xe)})}t(h),T(()=>{pe(ye,`width: ${e(s)/u.length*100}%`),l(ke,`Step ${e(s)??""} of ${u.length??""}`)}),m(H,h)},$$slots:{controls:!0,default:!0}}),Ie()}Ee(["click"]);export{lt as component};
