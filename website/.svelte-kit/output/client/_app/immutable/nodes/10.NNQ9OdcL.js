import{f as m,b as u}from"../chunks/DLAMQWiX.js";import{ap as Ne,ar as _,D as $e,au as Re,aq as Ee,f as We,$ as De,k as t,z as a,i as n,as as Fe,l as e,t as C,j as Ve,F as o,aC as je,n as ze}from"../chunks/CA-YEXjj.js";import{d as Le,s as i}from"../chunks/CcFbpJ_b.js";import{i as ue}from"../chunks/Cjh8sQO3.js";import{e as J,i as X}from"../chunks/DlD--9Nh.js";import{h as Oe}from"../chunks/B8NQnvAs.js";import{s as Be}from"../chunks/COGkoBFf.js";import{D as Ke}from"../chunks/CGbQeNq2.js";import{M as Qe,A as Ue}from"../chunks/DvmCYIuW.js";import{P as Ge}from"../chunks/Y6OHFTre.js";import{A as Je}from"../chunks/BEydp0xW.js";const E=[{agent_id:"employee",display_name:"Sam",role:"negotiator",avatar:'<i class="fa-solid fa-laptop-code" aria-hidden="true"></i>',color:"#3498db",constitution:{id:"employee-advocate",version:"1.0",persona:"muse",adherence:3}},{agent_id:"manager",display_name:"Patricia",role:"negotiator",avatar:'<i class="fa-solid fa-user-tie" aria-hidden="true"></i>',color:"#e74c3c",constitution:{id:"team-leader",version:"1.0",persona:"ambassador",adherence:4}},{agent_id:"mediator",display_name:"HR Mediator",role:"mediator",avatar:'<i class="fa-solid fa-scale-balanced" aria-hidden="true"></i>',color:"#9b59b6",constitution:{id:"fair-process",version:"1.0",persona:"anchor",adherence:5}}],S={title:"Flexible Work Arrangement Request",description:"Sam has requested to work remotely 3 days per week. Patricia has concerns about team coordination. HR is mediating.",stakes:{employee:"Work-life balance and commute reduction",manager:"Team cohesion and project coordination",organization:"Retention, productivity, and fairness"}},c=[{round:1,actor:"mediator",action:"mediate",content:"Thank you both for coming. Our goal is to find an arrangement that works for Sam, Patricia, and the team. Let's start with understanding each perspective.",vcpContextShared:["role: neutral_facilitator","goal: mutual_agreement"],vcpContextHidden:[],explanation:"HR Mediator establishes ground rules. Their neutrality is explicit."},{round:2,actor:"employee",action:"propose",content:"I'd like to work from home Monday, Wednesday, and Friday. My productivity is actually higher at home—fewer interruptions. I can be available for all core meetings.",vcpContextShared:["preference: remote_work","benefit: productivity","commitment: meeting_availability"],vcpContextHidden:["commute_hardship","childcare_needs","health_considerations"],explanation:"Sam states their request. Productivity benefits are shared; personal circumstances remain private."},{round:3,actor:"manager",action:"respond",content:"I appreciate your flexibility, Sam. My concern is team cohesion. We have stand-ups daily and spontaneous collaboration is valuable. Three days seems like a lot.",vcpContextShared:["concern: team_coordination","value: collaboration","perspective: team_needs"],vcpContextHidden:["other_team_requests","upper_management_pressure","past_remote_failures"],explanation:"Patricia shares concerns. Team needs are public; management pressures and precedent worries are private."},{round:4,actor:"mediator",action:"clarify",content:"Patricia, can you help me understand which specific activities require in-person presence? Sam, what makes remote work important to you beyond productivity?",vcpContextShared:["technique: interest_based_negotiation"],vcpContextHidden:[],explanation:"Mediator probes for underlying interests without forcing disclosure of private details."},{round:5,actor:"manager",action:"clarify",content:"Tuesdays we have sprint planning, Thursdays are demos. Those really benefit from everyone being together. Other days are more flexible.",vcpContextShared:["schedule: critical_days","flexibility: other_days"],vcpContextHidden:["stakeholder_expectations","client_meeting_patterns"],explanation:"Patricia reveals some flexibility. Critical days are shared; external pressures stay private."},{round:6,actor:"employee",action:"clarify",content:"The flexibility helps me manage my energy and focus better. I can commit to being in-office on Tuesdays and Thursdays for those critical meetings.",vcpContextShared:["benefit: focus_management","offer: in_office_critical_days"],vcpContextHidden:["specific_health_needs","family_schedule","commute_impact"],explanation:'Sam offers compromise. "Energy and focus" is shared; specific health or family reasons remain private.'},{round:7,actor:"mediator",action:"mediate",content:"It sounds like we're converging on a 2-day in-office model. Sam in-office Tuesday and Thursday, remote Monday, Wednesday, Friday. Patricia, does that address your coordination concerns?",vcpContextShared:["synthesis: proposed_agreement"],vcpContextHidden:[],explanation:"Mediator synthesizes. The proposal addresses stated interests without requiring private disclosure."},{round:8,actor:"manager",action:"counter",content:"Almost. I'd like a 30-day trial period, and Sam should be reachable during core hours on remote days. If urgent issues arise, I need to be able to reach you.",vcpContextShared:["requirement: trial_period","requirement: availability"],vcpContextHidden:["past_remote_worker_issues","accountability_concerns"],explanation:"Patricia adds conditions. The requirements are stated; the experiences that shaped them are not."},{round:9,actor:"employee",action:"respond",content:"A trial period is fair. I'll keep Slack and my phone available during 9-5 on remote days. Can we agree to review after 30 days and extend to 3 months if it's working?",vcpContextShared:["acceptance: trial","commitment: availability","request: extension_path"],vcpContextHidden:["long_term_plans","other_job_considerations"],explanation:"Sam accepts with additions. Commitment is public; career considerations are private."},{round:10,actor:"manager",action:"agree",content:"That works for me. Let's document this: Tuesday and Thursday in-office, 30-day trial, available during core hours. Review meeting scheduled for one month from now.",vcpContextShared:["agreement: terms","next_steps: documentation"],vcpContextHidden:["relief_level","precedent_concerns"],explanation:"Patricia agrees. The terms are public; her feelings and concerns about precedent are private."},{round:11,actor:"mediator",action:"mediate",content:"Excellent resolution. I'll document this agreement. Both parties found common ground while protecting their core interests. Thank you both.",vcpContextShared:["outcome: successful_mediation"],vcpContextHidden:[],explanation:"Mediator concludes. The resolution addressed work needs without exposing personal circumstances."}],W={employee:{actual_reasons:["Child with special needs requiring afternoon therapy appointments","Chronic fatigue condition exacerbated by commute","Considering other job offers with fully remote options"],leverage_not_used:"Could invoke ADA accommodation but prefers collaborative solution"},manager:{actual_concerns:["Previous remote worker missed critical deadlines","VP has expressed preference for in-office culture","Three other team members have made similar requests"],constraints_not_stated:"Worried about fairness if she approves Sam but denies others"}},Xe=["Sam never had to disclose their child's special needs or health condition to get a flexible arrangement","Patricia didn't have to reveal her concerns about other team members' pending requests","The mediator facilitated based on INTERESTS (coordination, productivity) not REASONS (health, childcare)","VCP enabled each party to share what they were comfortable with while protecting sensitive information","The resolution was the same one that might have emerged from full disclosure—but with dignity preserved",'Neither party "lost face" or created precedents by revealing private circumstances'];var Ye=m('<meta name="description" content="See how VCP enables workplace conflict resolution while protecting sensitive personal reasons."/>'),Ze=m('<button class="control-btn"><span class="control-icon"> </span> <span> </span></button> <button class="control-btn"><span class="control-icon">⏭</span> <span>Step</span></button>',1),et=m('<li class="svelte-1t9n1vv"> </li>'),tt=m('<li class="svelte-1t9n1vv"> </li>'),at=m(`<div class="reveal-section svelte-1t9n1vv"><h3 class="svelte-1t9n1vv"><i class="fa-solid fa-lock" aria-hidden="true"></i> What Was Never Shared (Protected by VCP)</h3> <p class="reveal-subtitle svelte-1t9n1vv">Both parties reached agreement without revealing these sensitive details:</p> <div class="reveal-grid svelte-1t9n1vv"><div class="reveal-card reveal-employee svelte-1t9n1vv"><div class="reveal-header svelte-1t9n1vv"><span class="reveal-avatar svelte-1t9n1vv"><i class="fa-solid fa-laptop-code" aria-hidden="true"></i></span> <span class="reveal-name svelte-1t9n1vv">Sam's Private Context</span></div> <div class="reveal-content svelte-1t9n1vv"><h4 class="svelte-1t9n1vv">Actual Reasons (Never Disclosed)</h4> <ul class="svelte-1t9n1vv"></ul> <div class="leverage-note svelte-1t9n1vv"><strong>Leverage Not Used:</strong> </div></div></div> <div class="reveal-card reveal-manager svelte-1t9n1vv"><div class="reveal-header svelte-1t9n1vv"><span class="reveal-avatar svelte-1t9n1vv"><i class="fa-solid fa-user-tie" aria-hidden="true"></i></span> <span class="reveal-name svelte-1t9n1vv">Patricia's Private Context</span></div> <div class="reveal-content svelte-1t9n1vv"><h4 class="svelte-1t9n1vv">Actual Concerns (Never Disclosed)</h4> <ul class="svelte-1t9n1vv"></ul> <div class="leverage-note svelte-1t9n1vv"><strong>Constraint Not Stated:</strong> </div></div></div></div> <div class="outcome-note svelte-1t9n1vv"><span class="outcome-icon svelte-1t9n1vv"><i class="fa-solid fa-check" aria-hidden="true"></i></span> <span>The same resolution was achieved—but with dignity preserved on both sides.</span></div></div>`),nt=m('<li class="svelte-1t9n1vv"> </li>'),st=m('<div class="learning-section svelte-1t9n1vv"><h3 class="svelte-1t9n1vv"><i class="fa-solid fa-graduation-cap" aria-hidden="true"></i> Key Insights</h3> <ul class="learning-points svelte-1t9n1vv"></ul></div>'),rt=m('<div class="negotiation-layout svelte-1t9n1vv"><div class="controls-row svelte-1t9n1vv"><!> <!></div> <div class="topic-card svelte-1t9n1vv"><h3 class="svelte-1t9n1vv"> </h3> <p class="svelte-1t9n1vv"> </p> <div class="stakes-grid svelte-1t9n1vv"><div class="stake-item svelte-1t9n1vv"><span class="stake-label svelte-1t9n1vv">Employee</span> <span class="stake-value svelte-1t9n1vv"> </span></div> <div class="stake-item svelte-1t9n1vv"><span class="stake-label svelte-1t9n1vv">Manager</span> <span class="stake-value svelte-1t9n1vv"> </span></div> <div class="stake-item svelte-1t9n1vv"><span class="stake-label svelte-1t9n1vv">Organization</span> <span class="stake-value svelte-1t9n1vv"> </span></div></div></div> <div class="arena-section svelte-1t9n1vv"><!></div> <div class="chat-section svelte-1t9n1vv"><!></div> <!> <div class="progress-section svelte-1t9n1vv"><div class="progress-bar svelte-1t9n1vv"><div class="progress-fill svelte-1t9n1vv"></div></div> <span class="progress-text svelte-1t9n1vv"> </span></div> <!></div>');function ft(me,he){Ne(he,!0);let r=_(0),p=_(!1),y=_($e([])),P=_(null),T=_(!1),b=null;function ge(s){return E.find(x=>x.agent_id===s)||E[0]}function Y(){if(a(r)<c.length){const s=c[a(r)];o(P,s.actor,!0),o(y,[...a(y),{id:`msg_${a(r)}`,sender:ge(s.actor),content:s.content,timestamp:new Date().toISOString(),vcpContextShared:s.vcpContextShared,vcpContextHidden:s.vcpContextHidden,action:s.action}],!0),je(r),a(r)>=c.length&&setTimeout(()=>{o(T,!0)},1e3),setTimeout(()=>{o(P,null)},1500)}else A()}function A(){o(p,!1),b&&(clearInterval(b),b=null)}function Z(){A(),o(r,0),o(y,[],!0),o(P,null),o(T,!1)}Re(()=>()=>{b&&clearInterval(b)});let ee=_(void 0),te=_(3e3);const fe=[{id:"deliberate",name:"Deliberate",description:"Careful pace for analysis",icon:"fa-comment-dots",data:{speed:4500},tags:["educational"]},{id:"normal",name:"Normal",description:"Natural conversation pace",icon:"fa-comments",data:{speed:3e3},tags:["balanced"]},{id:"quick",name:"Quick",description:"Fast overview",icon:"fa-forward-fast",data:{speed:1500},tags:["quick"]}];function _e(s){o(te,s.data.speed,!0),o(ee,s.id,!0),a(p)&&(A(),ae())}function ae(){a(r)>=c.length&&Z(),o(p,!0),b=setInterval(()=>{Y(),a(r)>=c.length&&A()},a(te))}const ye=Fe(()=>{const s=[],x=a(y).filter(l=>l.sender.agent_id==="employee"),I=a(y).filter(l=>l.sender.agent_id==="manager");return s.push({field:"Employee Statements",category:"shared",value:`${x.length} messages`,reason:"Public position and requests"}),s.push({field:"Manager Statements",category:"shared",value:`${I.length} messages`,reason:"Public position and offers"}),s.push({field:"Negotiation Topic",category:"shared",value:S.title,reason:"Subject of discussion is public"}),s.push({field:"Negotiation Phase",category:"influenced",value:`Round ${a(r)}/${c.length}`,reason:"Progress affects urgency and flexibility"}),s.push({field:"Resolution Status",category:"influenced",value:a(T)?"Complete":"In Progress",reason:"Both parties adapting positions"}),s.push({field:"Employee's Actual Reasons",category:"withheld",reason:"Personal circumstances (eldercare, health) not disclosed"}),s.push({field:"Manager's Constraints",category:"withheld",reason:"Internal pressures and political concerns hidden"}),s.push({field:"Negotiation Leverage",category:"withheld",reason:"Neither party revealed full leverage positions"}),s.push({field:"Emotional Stakes",category:"withheld",reason:"Personal impact and stress levels protected"}),s});Oe("1t9n1vv",s=>{var x=Ye();We(()=>{De.title="Negotiation Demo - VCP Multi-Agent"}),u(s,x)}),Ke(me,{title:"Flexible Work Negotiation",description:"An employee and manager negotiate remote work. VCP protects personal circumstances while enabling resolution.",onReset:Z,controls:I=>{var l=Ze(),d=Ve(l);d.__click=()=>a(p)?A():ae();var k=t(d),D=t(k,!0);e(k);var w=n(k,2),q=t(w,!0);e(w),e(d);var N=n(d,2);N.__click=Y,C(()=>{d.disabled=a(r)>=c.length&&!a(p),i(D,a(p)?"⏸":"▶"),i(q,a(p)?"Pause":"Play"),N.disabled=a(p)||a(r)>=c.length}),u(I,l)},children:I=>{var l=rt(),d=t(l),k=t(d);Ge(k,{get presets(){return fe},get selected(){return a(ee)},onselect:v=>_e(v),title:"Playback Speed"});var D=n(k,2);Je(D,{get entries(){return a(ye)},title:"VCP Context Audit",compact:!0}),e(d);var w=n(d,2),q=t(w),N=t(q,!0);e(q);var F=n(q,2),be=t(F,!0);e(F);var ne=n(F,2),V=t(ne),se=n(t(V),2),xe=t(se,!0);e(se),e(V);var j=n(V,2),re=n(t(j),2),ke=t(re,!0);e(re),e(j);var ie=n(j,2),oe=n(t(ie),2),we=t(oe,!0);e(oe),e(ie),e(ne),e(w);var z=n(w,2),Ce=t(z);Qe(Ce,{get agents(){return E},get currentSpeaker(){return a(P)},layout:"row",showSharedFields:!1}),e(z);var L=n(z,2),Se=t(L);Ue(Se,{get messages(){return a(y)},get agents(){return E},get currentSpeaker(){return a(P)},showContextIndicators:!0}),e(L);var le=n(L,2);{var Pe=v=>{var h=at(),M=n(t(h),4),H=t(M),$=n(t(H),2),g=n(t($),2);J(g,21,()=>W.employee.actual_reasons,X,(Q,U)=>{var f=et(),G=t(f,!0);e(f),C(()=>i(G,a(U))),u(Q,f)}),e(g);var R=n(g,2),Me=n(t(R));e(R),e($),e(H);var de=n(H,2),ve=n(t(de),2),K=n(t(ve),2);J(K,21,()=>W.manager.actual_concerns,X,(Q,U)=>{var f=tt(),G=t(f,!0);e(f),C(()=>i(G,a(U))),u(Q,f)}),e(K);var pe=n(K,2),He=n(t(pe));e(pe),e(ve),e(de),e(M),ze(2),e(h),C(()=>{i(Me,` ${W.employee.leverage_not_used}`),i(He,` ${W.manager.constraints_not_stated}`)}),u(v,h)};ue(le,v=>{a(T)&&v(Pe)})}var O=n(le,2),B=t(O),Te=t(B);e(B);var ce=n(B,2),Ae=t(ce);e(ce),e(O);var Ie=n(O,2);{var qe=v=>{var h=st(),M=n(t(h),2);J(M,21,()=>Xe,X,(H,$)=>{var g=nt(),R=t(g,!0);e(g),C(()=>i(R,a($))),u(H,g)}),e(M),e(h),u(v,h)};ue(Ie,v=>{a(T)&&v(qe)})}e(l),C(()=>{i(N,S.title),i(be,S.description),i(xe,S.stakes.employee),i(ke,S.stakes.manager),i(we,S.stakes.organization),Be(Te,`width: ${a(r)/c.length*100}%`),i(Ae,`Round ${a(r)??""} of ${c.length??""}`)}),u(I,l)},$$slots:{controls:!0,default:!0}}),Ee()}Le(["click"]);export{ft as component};
