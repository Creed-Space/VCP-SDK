import{f as d,b as n,t as oe,d as te,e as de}from"./DLAMQWiX.js";import{ap as ee,k as r,l as e,i as c,t as m,aq as ae,z as t,as as G,j as se}from"./CA-YEXjj.js";import{s as j}from"./CcFbpJ_b.js";import{i as C}from"./Cjh8sQO3.js";import{e as H,i as V}from"./DlD--9Nh.js";import{s as Z}from"./COGkoBFf.js";import{p as A}from"./C_FJgLy-.js";import{s as U}from"./BSTOKesL.js";import{s as Y}from"./C5dXRjDF.js";import{c as re}from"./BRzKQYUk.js";var ce=d('<i aria-hidden="true"></i>'),fe=d('<span class="state-indicator svelte-5ux9oo"><!></span>'),_e=d('<span class="role-badge svelte-5ux9oo"><i aria-hidden="true"></i></span>'),pe=d('<span class="agent-name svelte-5ux9oo"> </span>'),ue=d('<div><div class="avatar-ring svelte-5ux9oo"><div class="avatar-icon svelte-5ux9oo"> </div> <!></div> <!> <!></div>');function X(O,f){ee(f,!0);let x=A(f,"state",3,"idle"),M=A(f,"size",3,"md"),D=A(f,"showBadge",3,!0),F=A(f,"showName",3,!0);const J={sm:"size-sm",md:"size-md",lg:"size-lg"},N={idle:"",thinking:"...",speaking:"fa-solid fa-comment",listening:"fa-solid fa-ear-listen"},P={negotiator:"fa-solid fa-handshake",mediator:"fa-solid fa-scale-balanced",voter:"fa-solid fa-box-ballot",advocate:"fa-solid fa-bullhorn",bidder:"fa-solid fa-coins",auctioneer:"fa-solid fa-gavel"};var w=ue();let L;var q=r(w),R=r(q),Q=r(R,!0);e(R);var k=c(R,2);{var s=i=>{var a=fe(),o=r(a);{var v=l=>{var g=ce();m(()=>Y(g,1,re(N[x()]),"svelte-5ux9oo")),n(l,g)},p=l=>{var g=oe();m(()=>j(g,N[x()])),n(l,g)};C(o,l=>{N[x()].startsWith("fa-")?l(v):l(p,!1)})}e(a),n(i,a)};C(k,i=>{x()!=="idle"&&i(s)})}e(q);var _=c(q,2);{var h=i=>{var a=_e(),o=r(a);e(a),m(()=>{U(a,"title",f.agent.role),Y(o,1,re(P[f.agent.role]||"fa-solid fa-robot"),"svelte-5ux9oo")}),n(i,a)};C(_,i=>{D()&&i(h)})}var y=c(_,2);{var I=i=>{var a=pe(),o=r(a,!0);e(a),m(()=>j(o,f.agent.display_name)),n(i,a)};C(y,i=>{F()&&i(I)})}e(w),m(()=>{L=Y(w,1,`agent-avatar ${J[M()]??""}`,"svelte-5ux9oo",L,{thinking:x()==="thinking"}),Z(q,`--agent-color: ${f.agent.color??""}`),j(Q,f.agent.avatar)}),n(O,w),ae()}var ge=d('<span class="action-badge svelte-fp8j5p"> </span>'),he=d('<span class="context-shared svelte-fp8j5p" title="VCP context shared"><i class="fa-solid fa-check" aria-hidden="true"></i> </span>'),me=d('<span class="context-hidden svelte-fp8j5p" title="VCP context (private, influenced output)"><i class="fa-solid fa-lock" aria-hidden="true"></i> </span>'),xe=d('<div class="context-indicators svelte-fp8j5p"><!> <!></div>'),ke=d('<div class="message svelte-fp8j5p"><div class="message-avatar svelte-fp8j5p"><!></div> <div class="message-content svelte-fp8j5p"><div class="message-header svelte-fp8j5p"><span class="sender-name svelte-fp8j5p"> </span> <!> <span class="timestamp svelte-fp8j5p"> </span></div> <div class="message-body svelte-fp8j5p"> </div> <!></div></div>'),be=d('<div class="empty-state svelte-fp8j5p"><span class="empty-icon svelte-fp8j5p"><i class="fa-solid fa-comment" aria-hidden="true"></i></span> <p>No messages yet. Start the simulation to see agent interactions.</p></div>'),je=d('<div class="agent-chat svelte-fp8j5p"><div class="agent-roster svelte-fp8j5p"></div> <div class="message-list svelte-fp8j5p"><!> <!></div></div>');function Oe(O,f){ee(f,!0);let x=A(f,"messages",19,()=>[]),M=A(f,"agents",19,()=>[]),D=A(f,"currentSpeaker",3,null),F=A(f,"showContextIndicators",3,!0);function J(k){return D()===k?"speaking":D()?"listening":"idle"}function N(k){try{return new Date(k).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}}var P=je(),w=r(P);H(w,21,M,V,(k,s)=>{{let _=G(()=>J(t(s).agent_id));X(k,{get agent(){return t(s)},get state(){return t(_)},size:"sm",showName:!0})}}),e(w);var L=c(w,2),q=r(L);H(q,17,x,k=>k.id,(k,s)=>{var _=ke(),h=r(_),y=r(h);X(y,{get agent(){return t(s).sender},state:"idle",size:"sm",showBadge:!1,showName:!1}),e(h);var I=c(h,2),i=r(I),a=r(i),o=r(a,!0);e(a);var v=c(a,2);{var p=u=>{var b=ge(),B=r(b,!0);e(b),m(()=>j(B,t(s).action)),n(u,b)};C(v,u=>{t(s).action&&u(p)})}var l=c(v,2),g=r(l,!0);e(l),e(i);var S=c(i,2),W=r(S,!0);e(S);var T=c(S,2);{var K=u=>{var b=xe(),B=r(b);{var ie=E=>{var z=he(),$=c(r(z));e(z),m(le=>j($,` ${le??""}`),[()=>t(s).vcpContextShared.join(", ")]),n(E,z)};C(B,E=>{var z;(z=t(s).vcpContextShared)!=null&&z.length&&E(ie)})}var ne=c(B,2);{var ve=E=>{var z=me(),$=c(r(z));e(z),m(()=>j($,` ${t(s).vcpContextHidden.length??""} private field${t(s).vcpContextHidden.length>1?"s":""} influenced`)),n(E,z)};C(ne,E=>{var z;(z=t(s).vcpContextHidden)!=null&&z.length&&E(ve)})}e(b),n(u,b)};C(T,u=>{var b,B;F()&&((b=t(s).vcpContextShared)!=null&&b.length||(B=t(s).vcpContextHidden)!=null&&B.length)&&u(K)})}e(I),e(_),m(u=>{Z(_,`--sender-color: ${t(s).sender.color??""}`),Z(a,`color: ${t(s).sender.color??""}`),j(o,t(s).sender.display_name),j(g,u),j(W,t(s).content)},[()=>N(t(s).timestamp)]),n(k,_)});var R=c(q,2);{var Q=k=>{var s=be();n(k,s)};C(R,k=>{x().length===0&&k(Q)})}e(L),e(P),n(O,P),ae()}var Ce=de('<line stroke="rgba(255,255,255,0.1)" stroke-width="1"></line>'),we=d('<div class="shared-center svelte-1l0kbf3"><span class="shared-icon svelte-1l0kbf3"><i class="fa-solid fa-link" aria-hidden="true"></i></span> <span class="shared-label svelte-1l0kbf3">Shared</span> <span class="shared-count svelte-1l0kbf3"> </span></div>'),ye=d('<div class="agent-node svelte-1l0kbf3"><!></div>'),Se=d('<div class="arena-circle svelte-1l0kbf3"><svg class="connection-lines svelte-1l0kbf3" viewBox="0 0 300 300"></svg> <!> <!></div>'),ze=d('<span class="private-badge svelte-1l0kbf3"><i class="fa-solid fa-lock" aria-hidden="true"></i> </span>'),Ae=d('<div class="agent-card svelte-1l0kbf3"><!> <div class="agent-info svelte-1l0kbf3"><span class="agent-role svelte-1l0kbf3"> </span> <!></div></div>'),Me=d('<div class="arena-row svelte-1l0kbf3"></div>'),Ie=d('<div class="agent-card svelte-1l0kbf3"><!> <div class="agent-info svelte-1l0kbf3"><span class="agent-role svelte-1l0kbf3"> </span></div></div>'),Ne=d('<div class="arena-grid svelte-1l0kbf3"></div>'),Pe=d('<span class="field-chip shared svelte-1l0kbf3"> </span>'),qe=d('<span class="field-chip consensus svelte-1l0kbf3"> </span>'),Be=d('<div class="consensus-fields svelte-1l0kbf3"><span class="consensus-label svelte-1l0kbf3">Requires consensus:</span> <!></div>'),He=d('<div class="shared-panel svelte-1l0kbf3"><h4 class="svelte-1l0kbf3"><span class="panel-icon svelte-1l0kbf3"><i class="fa-solid fa-link" aria-hidden="true"></i></span> Shared Context Space</h4> <div class="shared-fields svelte-1l0kbf3"></div> <!></div>'),Fe=d("<div><!> <!></div>");function Qe(O,f){ee(f,!0);let x=A(f,"agents",19,()=>[]),M=A(f,"sharedContext",3,null),D=A(f,"currentSpeaker",3,null),F=A(f,"layout",3,"circle"),J=A(f,"showSharedFields",3,!0);function N(s){return D()===s?"speaking":D()?"listening":"idle"}function P(s,_){const h=s/_*2*Math.PI-Math.PI/2,y=120;return{x:Math.cos(h)*y+150,y:Math.sin(h)*y+150}}var w=Fe(),L=r(w);{var q=s=>{var _=Se(),h=r(_);H(h,21,x,V,(a,o,v)=>{var p=te(),l=se(p);H(l,17,()=>x().slice(v+1),V,(g,S,W)=>{const T=G(()=>P(v,x().length)),K=G(()=>P(v+W+1,x().length));var u=Ce();m(()=>{U(u,"x1",t(T).x),U(u,"y1",t(T).y),U(u,"x2",t(K).x),U(u,"y2",t(K).y)}),n(g,u)}),n(a,p)}),e(h);var y=c(h,2);{var I=a=>{var o=we(),v=c(r(o),4),p=r(v);e(v),e(o),m(()=>j(p,`${M().shared_fields.length??""} fields`)),n(a,o)};C(y,a=>{J()&&M()&&a(I)})}var i=c(y,2);H(i,17,x,V,(a,o,v)=>{const p=G(()=>P(v,x().length));var l=ye(),g=r(l);{let S=G(()=>N(t(o).agent_id));X(g,{get agent(){return t(o)},get state(){return t(S)},size:"lg"})}e(l),m(()=>Z(l,`left: ${t(p).x??""}px; top: ${t(p).y??""}px; transform: translate(-50%, -50%)`)),n(a,l)}),e(_),n(s,_)},R=s=>{var _=te(),h=se(_);{var y=i=>{var a=Me();H(a,21,x,V,(o,v)=>{var p=Ae(),l=r(p);{let u=G(()=>N(t(v).agent_id));X(l,{get agent(){return t(v)},get state(){return t(u)},size:"lg"})}var g=c(l,2),S=r(g),W=r(S,!0);e(S);var T=c(S,2);{var K=u=>{var b=ze(),B=c(r(b));e(b),m(()=>j(B,` ${M().private_per_agent[t(v).agent_id].length??""} private`)),n(u,b)};C(T,u=>{var b;(b=M())!=null&&b.private_per_agent[t(v).agent_id]&&u(K)})}e(g),e(p),m(()=>j(W,t(v).role)),n(o,p)}),e(a),n(i,a)},I=i=>{var a=Ne();H(a,21,x,V,(o,v)=>{var p=Ie(),l=r(p);{let T=G(()=>N(t(v).agent_id));X(l,{get agent(){return t(v)},get state(){return t(T)},size:"md"})}var g=c(l,2),S=r(g),W=r(S,!0);e(S),e(g),e(p),m(()=>j(W,t(v).role)),n(o,p)}),e(a),n(i,a)};C(h,i=>{F()==="row"?i(y):i(I,!1)},!0)}n(s,_)};C(L,s=>{F()==="circle"?s(q):s(R,!1)})}var Q=c(L,2);{var k=s=>{var _=He(),h=c(r(_),2);H(h,21,()=>M().shared_fields,V,(i,a)=>{var o=Pe(),v=r(o,!0);e(o),m(()=>j(v,t(a))),n(i,o)}),e(h);var y=c(h,2);{var I=i=>{var a=Be(),o=c(r(a),2);H(o,17,()=>M().consensus_required,V,(v,p)=>{var l=qe(),g=r(l,!0);e(l),m(()=>j(g,t(p))),n(v,l)}),e(a),n(i,a)};C(y,i=>{M().consensus_required.length>0&&i(I)})}e(_),n(s,_)};C(Q,s=>{J()&&M()&&F()!=="circle"&&s(k)})}e(w),m(()=>Y(w,1,`arena arena-${F()??""}`,"svelte-1l0kbf3")),n(O,w),ae()}export{Oe as A,Qe as M};
