const r='<i class="fa-solid fa-lock" aria-hidden="true"></i>';function t(e){var o,u,d;const i=[];i.push(`VCP:${e.vcp_version}:${e.profile_id}`),i.push(`C:${e.constitution.id}@${e.constitution.version}`),i.push(`P:${e.constitution.persona||"muse"}:${e.constitution.adherence||3}`);const a=((o=e.public_profile)==null?void 0:o.goal)||"unset",n=((u=e.public_profile)==null?void 0:u.experience)||"beginner",l=((d=e.public_profile)==null?void 0:d.learning_style)||"mixed";return i.push(`G:${a}:${n}:${l}`),i.push(s(e.constraints,e.portable_preferences)),i.push(h(e.constraints)),i.push(f(e.private_context)),i.join(`
`)}function s(e,i){const a=[];return e!=null&&e.noise_restricted&&a.push('<i class="fa-solid fa-volume-xmark" aria-hidden="true"></i>'),e!=null&&e.time_limited&&a.push("‚è∞lim"),e!=null&&e.energy_variable&&a.push('<i class="fa-solid fa-bolt" aria-hidden="true"></i>var'),(i==null?void 0:i.noise_mode)==="quiet_preferred"&&a.push('<i class="fa-solid fa-volume-xmark" aria-hidden="true"></i>quiet'),(i==null?void 0:i.noise_mode)==="silent_required"&&a.push('<i class="fa-solid fa-bell-slash" aria-hidden="true"></i>silent'),(i==null?void 0:i.budget_range)==="low"&&a.push('<i class="fa-solid fa-coins" aria-hidden="true"></i>low'),(i==null?void 0:i.budget_range)==="free_only"&&a.push("üÜì"),i!=null&&i.session_length&&a.push(`<i class="fa-solid fa-stopwatch" aria-hidden="true"></i>${i.session_length.replace("_","")}`),a.length===0?"X:none":`X:${a.join(":")}`}function h(e){const i=[];return e!=null&&e.time_limited&&i.push("time_limited"),e!=null&&e.noise_restricted&&i.push("noise_restricted"),e!=null&&e.budget_limited&&i.push("budget_limited"),e!=null&&e.energy_variable&&i.push("energy_variable"),e!=null&&e.schedule_irregular&&i.push("schedule_irregular"),i.length===0?"F:none":`F:${i.join("|")}`}function f(e){if(!e)return"S:none";const i=[],a=Object.keys(e).filter(l=>l!=="_note"&&l!=="_reasoning"),n=new Set;for(const l of a){const o=l.split("_")[0];n.add(o)}for(const l of n)i.push(`${r}${l}`);return i.length===0?"S:none":`S:${i.join("|")}`}function m(){return[{emoji:'<i class="fa-solid fa-volume-xmark" aria-hidden="true"></i>',meaning:"quiet mode"},{emoji:'<i class="fa-solid fa-bell-slash" aria-hidden="true"></i>',meaning:"silent required"},{emoji:'<i class="fa-solid fa-coins" aria-hidden="true"></i>',meaning:"budget tier"},{emoji:"üÜì",meaning:"free only"},{emoji:'<i class="fa-solid fa-bolt" aria-hidden="true"></i>',meaning:"energy variable"},{emoji:"‚è∞",meaning:"time limited"},{emoji:'<i class="fa-solid fa-stopwatch" aria-hidden="true"></i>',meaning:"session length"},{emoji:'<i class="fa-solid fa-calendar" aria-hidden="true"></i>',meaning:"irregular schedule"},{emoji:'<i class="fa-solid fa-lock" aria-hidden="true"></i>',meaning:"private (hidden value)"},{emoji:'<i class="fa-solid fa-check" aria-hidden="true"></i>',meaning:"shared"}]}function g(e){const i=[],a=[],n=[];if(e.public_profile)for(const[l,o]of Object.entries(e.public_profile))o!=null&&i.push(l);if(e.constraints)for(const[l,o]of Object.entries(e.constraints))o===!0&&n.push(l);if(e.private_context)for(const l of Object.keys(e.private_context))l!=="_note"&&l!=="_reasoning"&&a.push(l);return{transmitted:i,withheld:a,influencing:n}}export{g as a,t as e,m as g};
